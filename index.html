<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta property="vk:app_id" content="12345678"> <!-- –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
  <title>–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ ‚ú¶ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ</title>
  <style>
    /* –°—Ç–∏–ª–∏ ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ, —Ç—ë–º–Ω—ã–µ, –º–∞–≥–∏—á–µ—Å–∫–∏–µ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: radial-gradient(ellipse at top, #0b0d2e, #030514);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      font-family: 'Segoe UI', 'Roboto', system-ui, -apple-system, sans-serif;
      padding: 8px;
      color: #e0e5f0;
    }

    .container {
      max-width: 400px;
      width: 100%;
      border-radius: 36px 36px 24px 24px;
      background: rgba(8, 12, 25, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 25px 45px rgba(0,0,0,0.8), 0 0 0 2px #4a3f6e inset, 0 0 15px #7e6c9c;
      padding: 16px 12px 20px;
      border: 1px solid #a48ec0;
      margin: 8px 0;
    }

    h1 {
      text-align: center;
      font-weight: 300;
      font-size: 1.8rem;
      letter-spacing: 4px;
      text-transform: uppercase;
      text-shadow: 0 0 8px #b6a2dc, 0 0 20px #5f4b8b;
      color: #f3eaff;
      margin-bottom: 6px;
    }

    .subtitle {
      text-align: center;
      font-size: 0.8rem;
      margin-bottom: 10px;
      opacity: 0.8;
      font-style: italic;
      color: #cfc1f0;
      border-bottom: 1px dashed #6a5a8a;
      padding-bottom: 8px;
    }

    /* –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞ */
    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
      justify-content: center;
    }

    .input-group {
      flex: 1 1 120px;
      min-width: 120px;
    }

    label {
      display: block;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #cbb7fa;
      margin-bottom: 2px;
    }

    input {
      width: 100%;
      padding: 10px 8px;
      background: #1e1a36;
      border: 1px solid #6d5a9c;
      border-radius: 24px;
      color: #f0e6ff;
      font-size: 0.9rem;
      outline: none;
      transition: 0.2s;
    }

    input:focus {
      border-color: #c7a8ff;
      box-shadow: 0 0 12px #a07dd0;
    }

    .btn {
      background: linear-gradient(145deg, #4a3b7c, #2a1f4a);
      border: 1px solid #c9adff;
      color: white;
      padding: 12px 24px;
      border-radius: 40px;
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 1.5px;
      box-shadow: 0 5px 0 #120e24, 0 8px 16px black;
      transition: 0.1s ease;
      cursor: pointer;
      width: 100%;
      text-transform: uppercase;
      margin-top: 8px;
    }

    .btn:active {
      transform: translateY(5px);
      box-shadow: 0 2px 0 #120e24, 0 5px 12px black;
    }

    .btn:disabled {
      opacity: 0.5;
      transform: none;
      pointer-events: none;
    }

    /* SVG-–∫–∞—Ä—Ç–∞ ‚Äî —É–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä */
    .chart-container {
      position: relative;
      width: 180px;
      height: 180px;
      margin: 10px auto;
      filter: drop-shadow(0 0 15px #705ea7);
      border-radius: 50%;
      background: #03061a;
      box-shadow: 0 0 30px #2f2660 inset, 0 10px 20px black;
    }

    svg {
      display: block;
      width: 100%;
      height: 100%;
    }

    /* –ë–ª–æ–∫ –æ—Ç—á—ë—Ç–∞ */
    .report-section {
      margin-top: 12px;
      background: rgba(16, 12, 30, 0.7);
      border-radius: 28px;
      padding: 14px 12px;
      border: 1px solid #7a68b0;
    }

    .report-title {
      font-size: 1.2rem;
      text-align: center;
      color: #ffecbf;
      text-shadow: 0 0 8px #e2b45c;
      margin-bottom: 10px;
      letter-spacing: 1px;
    }

    .report-content {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .report-item {
      background: #0b0820;
      padding: 12px 14px;
      border-radius: 24px;
      border-left: 5px solid #b492e0;
      font-style: italic;
      font-size: 0.95rem;
      box-shadow: 0 2px 10px black;
      color: #ded3ff;
    }

    .loading {
      text-align: center;
      padding: 20px;
      color: #c7b5ff;
      font-size: 1.1rem;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { opacity: 0.5; }
      50% { opacity: 1; }
      100% { opacity: 0.5; }
    }

    .zodiac-sign {
      font-size: 11px;
      fill: #bbaae6;
      pointer-events: none;
    }

    .star {
      fill: white;
      opacity: 0.5;
      animation: twinkle 3s infinite alternate;
    }

    @keyframes twinkle {
      0% { opacity: 0.2; }
      100% { opacity: 1; }
    }

    .planet-glow {
      animation: glowPulse 3s infinite ease-in-out;
    }

    @keyframes glowPulse {
      0% { filter: drop-shadow(0 0 2px #fdeaa8); }
      50% { filter: drop-shadow(0 0 8px #fbf3d5) drop-shadow(0 0 4px #dbb05c); }
      100% { filter: drop-shadow(0 0 2px #fdeaa8); }
    }

    .hint {
      font-size: 0.65rem;
      text-align: center;
      margin-top: 8px;
      color: #988fc0;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>‚ú¶ –ö–ê–†–¢–ê ‚ú¶</h1>
  <div class="subtitle">–≤–≤–µ–¥–∏ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è</div>

  <!-- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ -->
  <div class="form-row">
    <div class="input-group">
      <label>üìÖ –¥–∞—Ç–∞</label>
      <input type="date" id="birthDate" value="1990-01-01">
    </div>
    <div class="input-group">
      <label>‚è∞ –≤—Ä–µ–º—è</label>
      <input type="time" id="birthTime" value="12:00">
    </div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ -->
  <button class="btn" id="calculateBtn">‚ú® —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–∞—Ä—Ç—É ‚ú®</button>

  <!-- –ù–µ–±–æ–ª—å—à–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã -->
  <div class="chart-container">
    <svg viewBox="0 0 200 200" id="chart-svg">
      <defs>
        <radialGradient id="planetGrad">
          <stop offset="0%" stop-color="#f7d875"/>
          <stop offset="80%" stop-color="#b4864b"/>
        </radialGradient>
      </defs>
      <g id="stars-bg"></g>
      <g id="zodiac-sectors"></g>
      <g id="aspect-lines"></g>
      <g id="planets"></g>
      <circle cx="100" cy="100" r="92" fill="none" stroke="#6a579a" stroke-width="0.8" stroke-dasharray="2 3" opacity="0.5"/>
      <circle cx="100" cy="100" r="70" fill="none" stroke="#4f3f79" stroke-width="0.6" stroke-dasharray="1 4"/>
    </svg>
  </div>

  <!-- –ë–ª–æ–∫ –æ—Ç—á—ë—Ç–∞ -->
  <div class="report-section">
    <div class="report-title">üåô —Å–≤–∏—Ç–æ–∫ —Å—É–¥—å–±—ã</div>
    <div id="reportContainer" class="report-content">
      <div class="report-item">‚ú® –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–º–∏ ¬´—Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å¬ª</div>
    </div>
  </div>
  <div class="hint">‚ö≤ 15 —Ç–∞–π–Ω—ã—Ö –ø–æ—Å–ª–∞–Ω–∏–π ‚Äî –æ–¥–Ω–æ –¥–ª—è —Ç–µ–±—è</div>
</div>

<script src="https://unpkg.com/@vkontakte/vk-bridge@2.1.4/dist/browser.min.js"></script>
<script>
  (function() {
    // VK Bridge –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    if (window.vkBridge) {
      vkBridge.send('VKWebAppInit', {});
    }

    // ---------- –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–∑–æ–¥–∏–∞–∫, –ø–ª–∞–Ω–µ—Ç—ã) ----------
    const zodiacs = [
      { symbol: '‚ôà', name: '–æ–≤–µ–Ω' },   // 0
      { symbol: '‚ôâ', name: '—Ç–µ–ª–µ—Ü' },   // 1
      { symbol: '‚ôä', name: '–±–ª–∏–∑–Ω–µ—Ü—ã' },// 2
      { symbol: '‚ôã', name: '—Ä–∞–∫' },     // 3
      { symbol: '‚ôå', name: '–ª–µ–≤' },     // 4
      { symbol: '‚ôç', name: '–¥–µ–≤–∞' },    // 5
      { symbol: '‚ôé', name: '–≤–µ—Å—ã' },    // 6
      { symbol: '‚ôè', name: '—Å–∫–æ—Ä–ø–∏–æ–Ω' },// 7
      { symbol: '‚ôê', name: '—Å—Ç—Ä–µ–ª–µ—Ü' }, // 8
      { symbol: '‚ôë', name: '–∫–æ–∑–µ—Ä–æ–≥' }, // 9
      { symbol: '‚ôí', name: '–≤–æ–¥–æ–ª–µ–π' }, // 10
      { symbol: '‚ôì', name: '—Ä—ã–±—ã' }     // 11
    ];

    // –ü–ª–∞–Ω–µ—Ç—ã (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –∫—Ä—É–≥–∞ 200x200)
    const planets = [
      { symbol: '‚òâ', coords: [120, 50] },  // –°–æ–ª–Ω—Ü–µ
      { symbol: '‚òΩ', coords: [70, 45] },   // –õ—É–Ω–∞
      { symbol: '‚òø', coords: [125, 115] }, // –ú–µ—Ä–∫—É—Ä–∏–π
      { symbol: '‚ôÄ', coords: [80, 140] },  // –í–µ–Ω–µ—Ä–∞
      { symbol: '‚ôÇ', coords: [145, 95] },  // –ú–∞—Ä—Å
      { symbol: '‚ôÉ', coords: [50, 110] },  // –Æ–ø–∏—Ç–µ—Ä
      { symbol: '‚ôÑ', coords: [90, 160] }   // –°–∞—Ç—É—Ä–Ω
    ];

    // 15 —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞–∫–∞)
    const universalAnswers = [
      "–¢–≤–æ–π –∑–Ω–∞–∫ ‚Äî %s. –í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ –∑–≤—ë–∑–¥—ã —Å–æ–≤–µ—Ç—É—é—Ç —Ç–µ–±–µ –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ —à—ë–ø–æ—Ç—É –ø—Ä–µ–¥–∫–æ–≤: –æ–Ω–∏ —É–∫–∞–∂—É—Ç –ø—É—Ç—å.",
      "–°–∫–æ—Ä–æ –≤ —Ç–≤–æ—é –∂–∏–∑–Ω—å –≤–æ–π–¥—ë—Ç —á–µ–ª–æ–≤–µ–∫, —á—å—ë –∏–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –±—É–∫–≤—ã, —Å–ø—Ä—è—Ç–∞–Ω–Ω–æ–π –≤ —Ç–≤–æ–µ–π –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è.",
      "–ù–µ –±–æ–π—Å—è –ø–µ—Ä–µ–º–µ–Ω ‚Äî –∑–∞ –±–ª–∏–∂–∞–π—à–∏–º –ø–æ–≤–æ—Ä–æ—Ç–æ–º —Ç–µ–±—è –∂–¥—ë—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –¥–∞—Ä —Å—É–¥—å–±—ã.",
      "–¢–∞–π–Ω–∞, –∫–æ—Ç–æ—Ä—É—é —Ç—ã —Ö—Ä–∞–Ω–∏—à—å, —Å–∫–æ—Ä–æ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ç—è–≥–æ—Ç–∏—Ç—å —Ç–µ–±—è. –ü—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è.",
      "–í–æ–¥–∞ –∏ –æ–≥–æ–Ω—å –ø–æ—Å–ø–æ—Ä—è—Ç –∑–∞ —Ç–≤–æ—é –¥—É—à—É –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ. –°–æ—Ö—Ä–∞–Ω–∏ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ ‚Äî –∏ –æ–±—Ä–µ—Ç—ë—à—å —Å–∏–ª—É.",
      "–°—Ç–∞—Ä—ã–π –¥—Ä—É–≥ –Ω–∞–ø–æ–º–Ω–∏—Ç –æ —Å–µ–±–µ –ø—Ä–∏ –ª—É–Ω–Ω–æ–º —Å–≤–µ—Ç–µ. –ù–µ –æ—Ç–≤–µ—Ä–≥–∞–π –ø–æ–º–æ—â—å –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ.",
      "–¢–≤–æ—è –∫–∞—Ä—å–µ—Ä–∞ —Å–¥–µ–ª–∞–µ—Ç –∫—Ä—É—Ç–æ–π –≤–∏—Ä–∞–∂. –î–æ–≤–µ—Ä—å—Å—è –∏–Ω—Ç—É–∏—Ü–∏–∏, –æ–Ω–∞ –æ—Å—Ç—Ä–µ–µ —Ä–∞–∑—É–º–∞.",
      "–í –±–ª–∏–∂–∞–π—à–∏–µ –¥–Ω–∏ –∏–∑–±–µ–≥–∞–π —Å–ø–µ—à–∫–∏. –°—É–¥—å–±–∞ –ª—é–±–∏—Ç —Ç–µ—Ö, –∫—Ç–æ —É–º–µ–µ—Ç –∂–¥–∞—Ç—å —É –º–æ—Ä—è –ø–æ–≥–æ–¥—ã.",
      "–ó–¥–æ—Ä–æ–≤—å–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è: –∑–≤—ë–∑–¥—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –ø—Ä–æ–≥—É–ª–∫–∏ —É –≤–æ–¥—ã –∏ —Ç—Ä–∞–≤—è–Ω–æ–π —á–∞–π.",
      "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ—Ç–æ–∫ –∏–∑–º–µ–Ω–∏—Ç —Ä—É—Å–ª–æ. –°–ª–µ–¥–∏ –∑–∞ –∑–Ω–∞–∫–∞–º–∏ ‚Äî –æ–Ω–∏ –ø—Ä–∏–≤–µ–¥—É—Ç –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É.",
      "–í –ª—é–±–≤–∏ –≤–æ–∑–º–æ–∂–µ–Ω –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç. –ö—Ç–æ-—Ç–æ –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–∞–≤–Ω–æ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Ç–µ–±—è –∏–Ω–∞—á–µ.",
      "–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—ä—ë–º –Ω–∞–∫—Ä–æ–µ—Ç –≤–æ–ª–Ω–æ–π. –õ–æ–≤–∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –Ω–µ —É–ø—É—Å—Ç–∏ –∏—Å–∫—Ä—É.",
      "–ü–æ–µ–∑–¥–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∫–∞–∑–∞–ª–∞—Å—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π, —Å–∫–æ—Ä–æ —Å—Ç–∞–Ω–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é. –ì–æ—Ç–æ–≤—å —á–µ–º–æ–¥–∞–Ω.",
      "–°—Å–æ—Ä–∞ —Å –±–ª–∏–∑–∫–∏–º –æ–±–µ—Ä–Ω—ë—Ç—Å—è –ø—Ä–∏–º–∏—Ä–µ–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ —É–∫—Ä–µ–ø–∏—Ç —Å–≤—è–∑—å –Ω–∞ –≥–æ–¥—ã.",
      "–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è —Å–µ–π—á–∞—Å —Å–∏–ª—å–Ω–∞ –∫–∞–∫ –Ω–∏–∫–æ–≥–¥–∞. –ü–µ—Ä–≤—ã–π –∂–µ –∏–º–ø—É–ª—å—Å –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Ü–µ–ª–∏."
    ];

    // –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞ –ø–æ –¥–∞—Ç–µ (–¥–µ–Ω—å, –º–µ—Å—è—Ü)
    function getZodiacSign(day, month) {
      if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return 0; // –æ–≤–µ–Ω
      if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return 1; // —Ç–µ–ª–µ—Ü
      if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) return 2; // –±–ª–∏–∑–Ω–µ—Ü—ã
      if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) return 3; // —Ä–∞–∫
      if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return 4; // –ª–µ–≤
      if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return 5; // –¥–µ–≤–∞
      if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) return 6; // –≤–µ—Å—ã
      if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) return 7; // —Å–∫–æ—Ä–ø–∏–æ–Ω
      if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) return 8; // —Å—Ç—Ä–µ–ª–µ—Ü
      if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return 9; // –∫–æ–∑–µ—Ä–æ–≥
      if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return 10; // –≤–æ–¥–æ–ª–µ–π
      return 11; // —Ä—ã–±—ã (19 —Ñ–µ–≤ - 20 –º–∞—Ä)
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
    function generateReport(dateStr, timeStr) {
      if (!dateStr) dateStr = '1990-01-01';
      if (!timeStr) timeStr = '12:00';
      
      const [year, month, day] = dateStr.split('-').map(Number);
      const [hour, minute] = timeStr.split(':').map(Number);
      
      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞
      const zodiacIndex = getZodiacSign(day, month);
      const zodiacName = zodiacs[zodiacIndex].name;
      const zodiacSymbol = zodiacs[zodiacIndex].symbol;

      // –í—ã—á–∏—Å–ª—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ (–ø—Ä–æ—Å—Ç–∞—è —Å—É–º–º–∞)
      const seed = (year * 12 + month * 31 + day * 24 + hour * 60 + minute) % 15;
      
      // –í—ã–±–∏—Ä–∞–µ–º 3 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º seed –∏ —Å–º–µ—â–µ–Ω–∏—è)
      const indices = [];
      for (let i = 0; i < 3; i++) {
        let idx = (seed + i * 7) % 15;
        indices.push(idx);
      }
      
      // –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç—ã, –ø–æ–¥—Å—Ç–∞–≤–ª—è—è –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ (–≥–¥–µ –µ—Å—Ç—å %s)
      const selectedAnswers = indices.map(idx => {
        let answer = universalAnswers[idx];
        // –ó–∞–º–µ–Ω—è–µ–º %s –Ω–∞ –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ —Å —Å–∏–º–≤–æ–ª–æ–º
        if (answer.includes('%s')) {
          answer = answer.replace('%s', `${zodiacSymbol} ${zodiacName}`);
        } else {
          // –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞–∫ –≤ –∫–æ–Ω–µ—Ü –¥–ª—è –µ–¥–∏–Ω—Å—Ç–≤–∞
          answer = answer + ` (${zodiacSymbol} ${zodiacName})`;
        }
        return answer;
      });

      return {
        zodiac: { index: zodiacIndex, name: zodiacName, symbol: zodiacSymbol },
        answers: selectedAnswers
      };
    }

    // ---------- –†–∏—Å–æ–≤–∞–Ω–∏–µ SVG ----------
    function drawChart() {
      const starsGroup = document.getElementById('stars-bg');
      for (let i = 0; i < 25; i++) {
        const cx = Math.random() * 200;
        const cy = Math.random() * 200;
        const r = Math.random() * 1.8 + 0.5;
        const star = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        star.setAttribute('cx', cx);
        star.setAttribute('cy', cy);
        star.setAttribute('r', r);
        star.setAttribute('class', 'star');
        star.style.animationDelay = (i * 0.2) % 3 + 's';
        starsGroup.appendChild(star);
      }

      // —Å–µ–∫—Ç–æ—Ä–∞ –∑–æ–¥–∏–∞–∫–∞ (12 —à—Ç, —Ü–µ–Ω—Ç—Ä 100,100 —Ä–∞–¥–∏—É—Å 90)
      const sectorsGroup = document.getElementById('zodiac-sectors');
      const centerX = 100, centerY = 100, radius = 90;
      for (let i = 0; i < 12; i++) {
        const startAngle = (i * 30 - 90) * Math.PI / 180;
        const endAngle = ((i + 1) * 30 - 90) * Math.PI / 180;
        const x1 = centerX + radius * Math.cos(startAngle);
        const y1 = centerY + radius * Math.sin(startAngle);
        const x2 = centerX + radius * Math.cos(endAngle);
        const y2 = centerY + radius * Math.sin(endAngle);
        const d = `M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 0 1 ${x2} ${y2} Z`;
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('d', d);
        const hue = (i * 30 + 180) % 360;
        path.setAttribute('fill', `hsla(${hue}, 50%, 25%, 0.25)`);
        path.setAttribute('data-zodiac', i);
        sectorsGroup.appendChild(path);

        // –ø–æ–¥–ø–∏—Å—å –∑–Ω–∞–∫–∞
        const midAngle = (startAngle + endAngle) / 2;
        const labelRadius = radius - 14;
        const tx = centerX + labelRadius * Math.cos(midAngle);
        const ty = centerY + labelRadius * Math.sin(midAngle);
        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        text.setAttribute('x', tx);
        text.setAttribute('y', ty);
        text.setAttribute('text-anchor', 'middle');
        text.setAttribute('dominant-baseline', 'middle');
        text.setAttribute('class', 'zodiac-sign');
        text.setAttribute('font-size', '11');
        text.textContent = zodiacs[i].symbol;
        sectorsGroup.appendChild(text);
      }

      // –ø–ª–∞–Ω–µ—Ç—ã
      const planetsGroup = document.getElementById('planets');
      planets.forEach((planet, idx) => {
        const [cx, cy] = planet.coords;
        const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', cx);
        circle.setAttribute('cy', cy);
        circle.setAttribute('r', '7');
        circle.setAttribute('fill', 'url(#planetGrad)');
        circle.setAttribute('stroke', '#fbeabc');
        circle.setAttribute('stroke-width', '1.8');
        circle.setAttribute('class', 'planet-glow');
        g.appendChild(circle);
        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        text.setAttribute('x', cx);
        text.setAttribute('y', cy);
        text.setAttribute('text-anchor', 'middle');
        text.setAttribute('dominant-baseline', 'middle');
        text.setAttribute('font-size', '11');
        text.setAttribute('fill', '#ffefc0');
        text.setAttribute('font-weight', 'bold');
        text.textContent = planet.symbol;
        g.appendChild(text);
        planetsGroup.appendChild(g);
      });

      // –ª–∏–Ω–∏–∏ –∞—Å–ø–µ–∫—Ç–æ–≤ (–¥–µ–∫–æ—Ä)
      const linesGroup = document.getElementById('aspect-lines');
      const points = planets.map(p => p.coords);
      for (let i = 0; i < points.length; i+=2) {
        for (let j = i+1; j < points.length; j+=3) {
          if (Math.random() > 0.4) continue;
          const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
          line.setAttribute('x1', points[i][0]);
          line.setAttribute('y1', points[i][1]);
          line.setAttribute('x2', points[j][0]);
          line.setAttribute('y2', points[j][1]);
          line.setAttribute('stroke', '#b39fd9');
          line.setAttribute('stroke-width', '0.6');
          line.setAttribute('stroke-dasharray', '3 3');
          line.setAttribute('opacity', '0.2');
          linesGroup.appendChild(line);
        }
      }
    }

    // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–µ–∫—Ç–æ—Ä–∞ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞
    function highlightZodiacSector(index) {
      const sectors = document.querySelectorAll('#zodiac-sectors path');
      sectors.forEach((path, i) => {
        if (i === index) {
          path.setAttribute('fill', `hsla(${(i*30+180)%360}, 70%, 35%, 0.6)`);
          path.setAttribute('stroke', '#ffd966');
          path.setAttribute('stroke-width', '1.5');
        } else {
          const hue = (i * 30 + 180) % 360;
          path.setAttribute('fill', `hsla(${hue}, 50%, 25%, 0.25)`);
          path.setAttribute('stroke', 'none');
        }
      });
    }

    // ---------- –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ ----------
    const calculateBtn = document.getElementById('calculateBtn');
    const reportContainer = document.getElementById('reportContainer');

    calculateBtn.addEventListener('click', () => {
      const dateInput = document.getElementById('birthDate').value;
      const timeInput = document.getElementById('birthTime').value;

      // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
      reportContainer.innerHTML = '<div class="loading">‚ú® –∑–≤—ë–∑–¥—ã —Å–æ–±–∏—Ä–∞—é—Ç –æ—Ç–≤–µ—Ç ‚ú®</div>';
      
      // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞
      setTimeout(() => {
        const report = generateReport(dateInput, timeInput);
        
        // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å —Å–µ–∫—Ç–æ—Ä –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
        highlightZodiacSector(report.zodiac.index);

        // –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç
        let html = '';
        report.answers.forEach(ans => {
          html += `<div class="report-item">üåô ${ans}</div>`;
        });
        reportContainer.innerHTML = html;

        // –°–æ–æ–±—â–∞–µ–º VK –æ –≤–æ–∑–º–æ–∂–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
        if (window.vkBridge) {
          vkBridge.send('VKWebAppResizeWindow', { width: 100, height: document.documentElement.scrollHeight });
        }
      }, 800); // –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ "–¥—É–º–∞–µ—Ç"
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', () => {
      drawChart();
    });
  })();
</script>
</body>
</html>